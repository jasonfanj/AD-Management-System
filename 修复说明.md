# 启动脚本修复说明

## 修复的问题

### 1. 虚拟环境Python使用问题
- **问题**: 启动脚本激活虚拟环境后，仍使用系统Python运行app.py
- **修复**: 所有启动脚本现在直接使用 `venv\Scripts\python.exe` 来运行应用

### 2. 依赖安装问题
- **问题**: 依赖安装检查不够完善
- **修复**: 改进了依赖安装逻辑，确保使用虚拟环境中的pip

### 3. 错误处理
- **问题**: 缺少对虚拟环境Python存在性的检查
- **修复**: 添加了虚拟环境Python存在性检查，提供清晰的错误提示

## 修复的文件

1. **start.bat** - Windows批处理启动脚本
2. **install.bat** - Windows依赖安装脚本
3. **启动.ps1** - PowerShell启动脚本
4. **使用完整路径启动.ps1** - 使用完整Python路径的启动脚本

## 使用方法

### 首次运行

1. **安装依赖**:
   ```powershell
   .\install.bat
   ```
   或
   ```powershell
   .\安装依赖.ps1
   ```

2. **启动服务**:
   ```powershell
   .\start.bat
   ```
   或
   ```powershell
   .\启动.ps1
   ```

### 日常使用

直接运行启动脚本即可：
```powershell
.\start.bat
```

脚本会自动：
- 检查Python环境
- 检查虚拟环境
- 更新依赖（如果需要）
- 使用虚拟环境中的Python启动应用

## 关键改进

1. **直接使用虚拟环境Python**: 不再依赖激活脚本，直接使用完整路径
2. **更好的错误提示**: 明确告知用户需要先安装依赖
3. **自动依赖更新**: 每次启动时检查并更新依赖

## 注意事项

- 如果虚拟环境不存在，脚本会提示运行安装脚本
- 首次运行必须先执行 `install.bat` 或 `安装依赖.ps1`
- 所有脚本现在都使用虚拟环境中的Python，确保依赖隔离

